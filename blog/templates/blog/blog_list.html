<!doctype html>
{% load staticfiles %}
{% load django_markdown %}
<html>
    <head>
        {% include "header.html" %}    
        <style>

            .blue-box { color:blue; text-decoration:none;}
            .contents { font-size:12px;}
            .header-sub { font-size:12px; color:#9197a3;}
            .right { float : right; }
            pre { background-color:#fff; 
                border:0;
            }
        </style>
        <title>Blog List</title>
    </head>
    <body>
        {% include "menu.html" %}
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span12">
                    <div>
                        <h4>Blog list</h4>
                        <form action="{% url 'blog:add_submit' %}" method="post" class="form-inline">
                            {% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}
                            {% csrf_token %}
                            <table class="table">
                                <tr>
                                    <td>Title</td>
                                    <td><input type="text" name="blog_title" value="" /></td>
                                </tr>
                                <tr>
                                    <td>Contents</td>
                                    <td><textarea id="contents" name="contents" rows="10" cols="100" style="width:95%"></textarea></td>
                                    {% markdown_editor "#contents" %}
                                    {% markdown_media %}
                                </tr>
                            </table>
                            <div class="btn-group">
                                <button class="btn" type="submit">Write</button>
                            </div>
                        </form>
                    </div>

                    {% if latest_blog_list %}
                    {% for blog in latest_blog_list %}
                    <div class="white-box">
                        <div class="row-fluid">
                            <div class="span1">
                                <img class="img-circle" src="http://placehold.it/64x64">
                            </div>
                            <div class="span11">
                                <a href="{{blog.id}}/update/">{{ blog.blog_title }}</a><br />
                                {{ blog.user.username }}<br />
                                {{ blog.pub_date|date:"Y-m-j" }}
                            </div>
                        </div>
                        <div class="contents">{{ blog.contents|markdown }}</div>
                        <div class="text-right">
                            <a class="btn" href="{{ blog.id }}/delete/"><i class="icon-trash"></i>Delete</a>
                            <a class="btn" href="{{ blog.id }}/like/"><i class="icon-heart"></i> {{ blog.like_count }}</a>
                        </div>
                    </div> <!-- white-box -->

                    {% endfor %}
                    {% else %}
                    <p>No contents</p>
                    {% endif %}
                </div> <!-- span8 -->
            </div> <!-- row end -->
        </div> <!-- container end -->
        {% include "footer.html" %}  
    </body>
</html>